<template>
  <div class="wrapper">
    <header>
      <h2 class="fullname">{{ employer?.lastName }} {{ employer?.firstName }}</h2>
      <span class="email">{{ employer?.email }}</span>
    </header>
    <main>
      <div class="wallet">
        <p>üçã <span>{{ employer?.lemons }}</span></p>
        <p>üíé <span>{{ employer?.diamonds }}</span></p>
      </div>
      <div class="actions">
        <div class="switch">
          <TransitionGroup name="slide">
            <div v-for="(operation, index) in operations" :key="index"
              :class="{ 'switch-item': true, active: activeOperationIndex === index }"
              @click="setActiveOperation(index)">
              <span>{{ operation }}</span>
            </div>
          </TransitionGroup>
        </div>
        <div class="switch">
          <TransitionGroup name="slide">
            <div v-for="(currency, index) in currencies" :key="index"
              :class="{ 'switch-item': true, active: activeCurrencyIndex === index }" @click="setActiveCurrency(index)">
              <span>{{ currency }}</span>
            </div>
          </TransitionGroup>
        </div>
        <input class="input" type="text" placeholder="0">
        <Button appearance="primary" class="submit">
          OK
        </Button>
      </div>

      <div class="history">
        <p class="history-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</p>
        <div class="history-list">
          <div class="history-empty">
            <p>–ù–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</p>
          </div>
        </div>
      </div>
    </main>
    <footer>
      <Button appearance="attention" class="deactivate">
        <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M6.5 19C6.5 19.5304 6.71071 20.0391 7.08579 20.4142C7.46086 20.7893 7.96957 21 8.5 21H16.5C17.0304 21 17.5391 20.7893 17.9142 20.4142C18.2893 20.0391 18.5 19.5304 18.5 19V7H6.5V19ZM8.5 9H16.5V19H8.5V9ZM16 4L15 3H10L9 4H5.5V6H19.5V4H16Z"
            fill="white" />
        </svg>
        –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</Button>
    </footer>
  </div>
</template>

<script setup lang="ts">
import Button from '@/components/Button.vue';
import type { User } from '@/types/user';
import { ref } from 'vue';

const operations = ['+', '-'];
const currencies = ['üçã', 'üíé'];
// –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞
const activeOperationIndex = ref(0); // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–µ –≤—ã–±—Ä–∞–Ω –Ω–∏ –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç
const activeCurrencyIndex = ref(0); // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–µ –≤—ã–±—Ä–∞–Ω –Ω–∏ –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç


// –ú–µ–Ω—è–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
const setActiveOperation = (index: number) => {
  activeOperationIndex.value = activeOperationIndex.value === index ? 0 : index; // –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–≤—Ç–æ—Ä–Ω–æ, —É–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
};

const setActiveCurrency = (index: number) => {
  activeCurrencyIndex.value = activeCurrencyIndex.value === index ? 0 : index; // –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–≤—Ç–æ—Ä–Ω–æ, —É–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
};


defineProps<{
  employer: User | undefined,
}>()
</script>

<style scoped>
header {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

main {
  display: flex;
  flex-direction: column;
  flex: 1;
}

footer {
  display: flex;
  justify-content: center;
  position: absolute;
  bottom: 28px;
  width: 100%;
}

.wrapper {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.fullname {
  font-style: normal;
  font-weight: 400;
  font-size: 26px;
  line-height: 30px;
}

.email {
  font-style: normal;
  font-weight: 400;
  font-size: 14px;
  line-height: 14px;

  color: var(--color-secondary-text);
}

.wallet {
  display: flex;
  justify-content: space-around;

  padding: 45px 0;
}

.wallet p {
  font-style: normal;
  font-weight: 400;
  font-size: 40px;
  line-height: 46px;
}

.actions {
  display: flex;
  flex-direction: row;
  gap: 0.5rem;
  margin-bottom: 1rem;
  justify-content: center
}

.history {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;

  flex-grow: 1;
}

.history-title {
  font-style: normal;
  font-weight: 400;
  font-size: 16px;
  line-height: 18px;
  text-align: center;

  padding: 32px 0;
}

.deactivate {
  font-size: 16px;
}

.history-list {
  flex-grow: 1;
}

.history-empty p {
  color: var(--color-secondary-text);
  text-align: center;
}

.switch {
  display: flex;
  background-color: rgba(255, 255, 255, .5);
  border-radius: 99px;
}

.switch-item {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 99px;
  margin: 4px;

}

.switch-item span {
  font-size: 14px;
}

.switch-item.active {
  background-color: var(--vt-c-primary);
}

/* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —Å–ª–∞–π–¥–æ–≤ */
.slide-enter-active,
.slide-leave-active {
  transition: transform 0.5s;
}

.slide-enter-from {
  transform: translateX(100%);
}

.slide-leave-to {
  transform: translateX(-100%);
}

.input {
  border-radius: 99px;
  border: none;
  background-color: rgba(255, 255, 255, .5);
  padding: 8px 16px;
  font-size: 14px;
}

.submit {
  width: 40px;
  height: 40px;
  border-radius: 99px;
  padding: 0;
  font-size: 14px;
}
</style>
